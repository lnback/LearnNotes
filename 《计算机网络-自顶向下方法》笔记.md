# 一、计算机网络与因特网

## 1.1 什么是因特网
### 1.1.1 因特网的具体构成
端系统(主机)通过通信链路和分组交换机连接到一起，不同的链路能够以不同的物理速率传输数据，链路的传输速率以比特/秒(bit/s，或bps)度量。当一台端系统要向另一台端系统发送数据时，发送端系统将数据分段，并为每段加上首部字节。由此形成的信息包用计算机网络的术语来说称为分组(packet)。这些分组通过网络发送到目的端系统，在那里被装配成初始数据。
### 1.1.2 
## 1.2 网络边缘

## 1.3 网络核心

### 1.3.1 分组交换
在各种网络应用中，端系统彼此交换报文。报文可以执行一种控制功能，也可以包含数据。为了从源端系统向目的端系统发送一个报文，源端系统将长报文划分为较小的数据块，称之为分组。

如果某源系统或分组交换机（路由器/链路层交换机）经过一条链路发送一个L比特的分组，链路的传输速率为R比特/秒，则传输该分组的时间为L/R秒。

- 1.3.1.1存储转发传输

多数分组交换机在链路的输入


## 1.4 分组交换网中的时延、丢包和吞吐率
### 1.4.1 时延的类型
- 处理时延

    **检查分组首部**和**决定该分组报文导向何处**所需要的的时间是处理时延的一部分。高速路由器的处理时延通常是微妙或更低的数量级。

    在这种节点处理之后，路由器将该分组引向通往下一个路由器链路之前的队列。
- 排队时延
    在队列中，当分组报文在链路上等待传输时，这个报文经受排队时延。

    一个特定分组的排队时延沿长度将取决于先期到达的正在排队等待向链路传输的分组数量。如果该队列是空的，并且当前没有其他分组在传输，则该分组的排队时延为0。另一方面，如果流量很大，并且许多其他分组也在等待传输，该排队时延将很长。实际的排队时延可以是毫秒到微妙量级。

- 传输时延

    传输时延是将所有分组的比特推向链路（传输/发射）所需要的的时间。实际的传输时延通常在毫米到微妙量级。
- 传播时延

    一个比特被推向链路，该比特需要向路由器B传播。从该链路的起点到路由器B传播所需要的的时间是传播时延。该比特已该链路的传播速率传播。该传播速率取决于该链路的物理媒体（光纤、双绞铜线等）。在广域网中，传播时延为毫秒量级。

- 传输时延和传播时延的区别

    
## 1.5 协议层次及其服务模型

## 1.6 面对共计的网络

## 1.7 计算机网络和因特网的历史

# 二、应用层
## 2.1 应用层协议原理
网络应用是计算机网络存在的理由。

研发网络应用程序的核心是写出能够运行在不同端系统和通过网络彼此通信的程序，当研发新应用程序时，需要编写将在多台端系统上运行的软件，不需要写在网络核心设备如路由器或链路层交换机上运行的软件。即使要为网络核心设备写一个应用程序，也不可能做到这一点。网络核心设备并不在应用层上起作用，特别是在网络层及下面层次起作用。这种基本设计，将应用软件限制在端系统的方法，促进了大量网络应用程序的迅速研发和部署。
### 2.1.1 网络应用程序体系结构
应用程序的体系结构不同于网络的体系结构，从程序开发者的角度来看，网络体系结构是固定的，并为应用程序提供了特定的服务集合。应用程序体系结构由应用程序的开发者设计，规定了如何在各种端系统上组织该应用程序。目前有两种主流体系结构：**客户-服务器体系结构（C/S结构）、P2P对等结构。**

- **客户-服务器结构**：利用客户-服务器体系结构，客户之间互相不直接通信，例如：在web应用中，两个浏览器不直接通信。该体系另一个特征是服务器具有固定的，众所周知的地址，该地址被称为IP地址。因为该服务器地址固定，并且总是开启的，客户可以通过该服务器的IP地址来发送分组报文与其联系。在这种体系结构下，常常会出现一台单独的服务器主机跟不上它所有的客户请求的情况。为此，配备大量主机的数据中心常被用于创建强大的虚拟服务器。
- **P2P体系**：在一个P2P体系结构中，对于数据中心的专用服务器有最小的（或者没有）依赖。相反，应用程序在间断连接的主机之间使用直接通信，这些主机称为对等方。
### 2.1.2 进程通信

进行通信本质上是进程，而不是程序。一个进程可以被认为是运行在端系统中的一个程序，当多个进程运行在相同的端系统上时，它们使用**进程间通信机制**相互通信。进程间通信的规则由端系统上的操作系统确定。在两个不同端系统上的进程，通过计算机网络**交换报文**进行通信，**发送进程**生成报文并向网络中发送报文，接收进程接收这些报文并可以通过回送报文进行响应。

**客户进程和服务器进程**：网络应用程序由成对的进程组成，这些进程通过网络相互发送报文。在每对通信进程之间，我们常将这两个进程一个标为**客户**，另一个标为**服务器**。

**进程与计算机网络之间的接口**：进程通过一个称为套接字（Socket）的软件接口向网络发送报文和接收报文。套接字是一台主机内应用层和运输层之间的接口，由于该套接字是建立在网络应用程序的可编程接口，因此套接字也称为应用程序和网络之间的**应用程序编程接口（API）**。应用程序的开发者可以控制套接字在应用层端的一切，但是对于套接字的传输端几乎没有控制权（1.选择运输层协议。2.设定几个参数）。

**进程寻址**：为了向特定目的地发送报文，目的地需要一个地址。类似地，在一台主机上运行的进程为了向在另一台主机的进程发送分组，接收进程需要有一个地址。为了标识该接收进程，需要定义两种信息：1.主机的地址；2.主机的标识符。**也就是IP地址和端口号。**

### 2.1.3 可供应用程序使用的运输服务
套接字是应用程序和运输层协议之间的接口，在发送端的应用程序将报文推进该套接字。在该套接字的另一侧，运输层协议负责从接收进程的套接字得到该报文。包括因特网在内的很多网络提供了不止一种运输层协议，当开发一个应用时，必须选择一种可用的运输层协议。 一个运输层协议大体提供四种服务：**可靠数据服务，吞吐量，定时，安全性。**

- **可靠数据服务**：分组在计算机中可能会丢失，如在路由器中的缓存溢出，或者当分组中某些比特损坏后可能会被丢弃。像电子邮件，金融应用，Web文档传输这些，必须要将数据完整，正确的交付给目的地。如果一个协议能做好这件事，就认位它提供了可靠数据服务。当一个运输协议提供这种服务时，发送进程只要将其数据传递进套接字，就可以完全相信该数据将能无差错的到达接收进程。 当一个运输层协议不提供可靠数据服务时，某些数据可能不能到达目的地。这可能能被**容忍丢失的应用**所接收，如交谈式音频，视频，它们可以承受一定量的数据丢失。
- **吞吐量**：即运输层协议能够以某种特定的速率提供确保的可用吞吐量。具有吞吐量要求的应用程序被称为**带宽敏感的应用**，许多目前得多媒体应用是带宽敏感的。带宽敏感的应用具有特定的吞吐量要求，而**弹性应用**能够根据当时可用的带宽或多或少的利用可供使用的吞吐量。如电子邮件，文件传输，Web传送都属于弹性应用。当然吞吐量越多越好。
- **定时**：运输层协议也能提供定时保证，这种服务对交互式实时应用程序有吸引力，如网络电话，虚拟环境，多方游戏。这些服务为了有效性而要求数据交付有严格的时间限制。
- **安全性**：运输层协议可以为应用程序提供一种或多种安全服务，如在发送主机中，运输协议能加密由发送进程传输的所有数据，在接收进程中，运输层协议能将数据解密后再交给接收进程。运输协议除了提供机密性的安全服务，还可以鉴定数据完整性和端点鉴别。

### 2.1.4 因特网提供的运输服务
因特网（TCP/IP网络）为应用提供了两个运输层协议，即**UDP和TCP**。

- **TCP服务**：TCP服务模型包括面向连接服务和可靠数据传输服务，当某个应用程序调用TCP作为运输协议时，该程序可以使用TCP提供的这两种服务。
  - 面向连接的服务：在应用层数据报文开始流动之前，TCP让客户和服务器互相交换运输层控制信息，这个所谓的握手过程提醒客户和服务器，让他们为大量分组的到来做好准备。在握手阶段，一个TCP连接就在两个进程的套接字之间建立了，这条连接是全双工的（双方进程可以在此连接上同事进行报文收发）
  - 可靠数据传输服务：通信进程能依靠TCP，无差错，按适当顺序交付所有发送的数据。
  - TCP拥塞控制机制：当发送方和接收方之间的网络出现拥塞时，TCP拥塞控制机制会抑制发送进程，TCP拥塞控制机制也会试图限制每个TCP连接，使它们达到公平共享网络带宽的目的。

- **TCP安全**：无论是TCP还是UDP都没有提供任何的加密机制，因此研发出了TCP的加强版 **安全套接字SSL**，SSL不但能完成TCP可以完成的，还提供了进程到进程的安全性服务，包括加密，数据完整性，端点鉴别。SSL不是一种和TCP，UDP在同一层次的第三种运输层协议而是一种对TCP的加强，这种强化是在应用层上实现的。
- **UDP服务**：UDP是一种只提供必要服务的轻量级运输协议，它仅提供最小服务。UDP是无连接的，因此没有握手过程。UDP协议提供的是一种不可靠数据传送服务，UDP也没有拥塞控制机制，所以UDP的发送端可以用它选择的任何速率向网络层注入数据。
- **因特网运输层协议不提供的服务**：在TCP和UDP的讨论中都没有说到吞吐量和定时时延，即这些服务，目前因特网运输协议并没有提供。总之，今天的因特网通常能为时间敏感的应用提供满意的服务，但它不能提供任何定时或带宽保证。 对于电子邮件，文件传输，Web都使用TCP，最主要的原因是TCP提供的可靠数据传输服务。但skype这样的因特网电话应用的开发者更愿意将该应用运行在UDP上，从而避开TCP的拥塞控制机制和分组开销，这些应用即使丢失了一些数据，也无伤大雅。

### 2.1.5 应用层协议
**应用层协议**：定义了不同端系统上的应用程序进程如何相互传递报文。 有些应用层协议定义在公共区域中，如Web的应用层协议超文本传输协议 HTTP。如果浏览器开发者遵从HTTP RFC 规则，那么开发出的浏览器即可访问任何遵循该文档的Web服务器，并获取希望的Web页面。 应用层协议只是网络应用的一部分,Web是一种客户-服务器应用，它允许客户按照需求从Web服务器获得文档。该Web应用由许多部分组成，包括 文档格式标准 HTML，Web浏览器，Web服务器，以及一个应用层协议 Web的应用层协议是HTTP，它定义了在浏览器和Web服务器之间传输的报文格式和序列。因此HTTP只是Web应用中的一部分。
## 2.2 Web和HTTP
### 2.2.1 HTTP概况
- **HTTP**：Web的应用层协议是**超文本传输协议**，他是web的核心。HTTP由两个程序实现，一个客户程序和一个服务器程序。客户程序和服务器程序运行在不同的端系统中，通过交换HTTP报文进行会话。HTTP定义了这些报文的结构以及客户和服务器进行报文交换的方式。
- **web页面**：也叫文档，是由对象组成的，一个对象只是一个文件，如一个HTTP文件，一个JPEG图形，等这样的一个文件。且它们都可以通过一个URL地址寻址。多数Web页面含有一个HTML基本文件以及几个引用对象。如一个Web页面包含了HTML文本和5个JPEG图形，那么这个Web页面有6个对象。HTML基本文件通过对象的URL地址引用页面中的其他对象。 每个URL由两部分组成，存放对象的服务器名 和 对象的路径名。 Web浏览器实现了HTTP的客户端，Web服务器实现了HTTP的服务器端，它用于存储Web对象，每个对象用URL寻址。

HTTP定义了web客户向Web服务器请求web页面的方式，以及服务器向客户传送web页面的方式。

HTTP使用TCP作为它的支撑运输协议，TCP为HTTP提供可靠的数据传输服务。HTTP协议不用担心数据丢失，也不关注TCP以及协议栈较低层的工作。

客户端的套接字接口是客户进程与TCP连接之间的门，在服务器端的套接字接口则是服务器进程与TCP之间的门，一旦客户向他的套接字发送一个完整的报文，该报文就脱离了客户控制并进入TCP控制。
### 2.2.2 非持续连接和持续连接
在许多因特网应用程序中，客户和服务器在一个相当长的时间内通信，其中客户发出一系列请求并且服务器对每个请求进行响应。当这种客户-服务器的交互是经过TCP进行时，要确定每个请求/响应是由一个单独的TCP连接发送还是所有的请求及其响应由相同的TCP连接发送。前者被称为**非持续连接**，后者称为**持续连接**。HTTP既能使用持续连接也能使用非持续连接。默认情况下使用持续连接。

**采用非持续连接的HTTP**：每个TCP连接在服务器发送一个对象后关闭，该连接并不为其他的对象保持下来。每个TCP连接只传输一个请求报文和一个响应报文。往返时间RTT，指一个短分组从客户到服务器然后再返回客户所花费的时间。RTT包括分组传播时延，排队时延和分组处理时延。粗略来讲，总的响应时间是两个RTT加上服务器传输HTML文件的时间。

**非持续连接缺点**：1.必须为每一个请求的对象建立和维护一个全新的连接，对于每个这样的连接，在客户和服务器中都要分配TCP的缓冲区和保持TCP变量，这给服务器带来了严重的负担。2.每一个对象经受两倍RTT的交付时延。

**采用持续连接的HTTP**：在使用HTTP1.1持续连接的情况下，服务器在发送响应后保持该TCP连接打开，在相同的客户机与服务器之间，后续的请求和响应报文能通过相同的连接进行传送。
### 2.2.3 HTTP报文格式
HTTP规范包含了对HTTP报文格式的定义，HTTP报文有两种，请求报文和响应报文。
- **HTTP请求报文**：
    请求行：请求方法 URL 版本
    首部行：首部字段名 值
    实体体：使用POST方法时会用到实体
- **HTTP响应报文**：
    响应行：版本 状态码 短语
    首部行：首部字段名 值
    实体体
### 2.2.4 cookie
HTTP服务器是无状态的，然而Web站点希望能够识别用户，可能因为服务器限制用户的访问，或他希望把内容和用户身份联系起来，为此HTTP使用了cookie，它允许站点对用户跟踪，大多数商务站点都使用了cookie。

**cookie**：cookie技术由四个组件组成：1.在HTTP响应报文中的一个cookie首部行。2.在HTTP请求报文中的一个cookie首部行。3.在用户端系统中保留一个cookie文件，由用户浏览器管理。4.位于Web站点的一个后端数据库，cookie可以用于标识一个用户，用户首次访问时，可能需要提供一个用户标识，在后继会话中，浏览器向服务器传递一个cookie首部，从而向该服务器标识了用户。因此cookie可以在无状态的HTTP上建立一个用户会话层。
### 2.2.5 web缓存
Web缓存器也叫代理服务器，它是能够代表初始web服务器来满足HTTP请求的网络诗体。web缓存器有自己的磁盘管理空间，并在存储空间中保存最近请求过的对象的副本。

**web缓存**：web缓存器既是服务器也是客户，当他接收浏览器的请求并返回响应时，他是服务器，当他向初始服务器发出请求并接收响应时，它是一个客户。部署Web缓存器的两个原因，首先，Web缓存器可以大大减少对客户请求的响应时间。其次，Web缓存器能从整体上大大减低因特网上的Web流量，改善应用的性能。 通过使用**内容分发网络 CDN**，Web缓存器正在因特网中发挥越来越重要的作用。
### 2.2.6 条件GET
尽管高速缓存能减少用户感受到的响应时间，但也引入了一个新的问题，即存放在缓存器中的对象副本可能是陈旧的。HTTP协议有一种机制，允许缓存器证实它的对象是最新的，这种机制就是**条件GET**。

**条件GET**：将一个代理缓存器代表一个请求浏览器，向某Web发送一个请求报文，方法字段采用GET来检查某对象是否被更改过了。GET报文高速服务器，仅当自指定日期后该对象被修改过，才发送该对象。如果该对象没有修改，那么Web服务器向缓存器发送一个响应报文，但不会在该响应报文中包含所请求的对象。包含请求对象只会浪费带宽，并增加用户感受到的响应时间。响应报文中的状态行304告诉缓存器可以继续使用该对象，能向请求的浏览器转发该对象在代理缓存器中的副本。
## 2.3 因特网中的电子邮件
电子邮件系统由三部分组成：
- **用户代理**：允许用户阅读，回复，转发，保存和撰写报文。
- **邮件服务器**：形成了电子邮件体系的核心，每个接收方在其中某个邮件服务器上有一个邮箱。一个典型的邮件发送过程：从发送方的用户代理开始，传输到发送方的邮件服务器，再传输到接收方的邮件服务器，然后在这里被分发到接收方的邮箱里。
- **SMTP**：是因特网电子邮件中主要的应用层协议。它使用TCP可靠数据传输服务，SMTP也有两个部分，运行在发送方邮件服务器的客户端和运行在接收方邮件服务器的服务器端。每台邮件服务器上既运行SMTP的客户端，也运行SMTP的服务器端。

### 2.3.1 SMTP
## 2.4 因特网的目录服务
## 2.5 P2P文件分发
## 2.6 视频流和内容分发网
# 三、传输层

# 四、链路层

# 五、物理层


本周工作内容：
1. 编写活动开发相关文档
2. 编写GM修复文档
3. 修改BOSS挑战英雄选择机制